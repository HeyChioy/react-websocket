{"version":3,"sources":["../src/WebSocketRC.js"],"names":["WebSocketRC","props","url","protocol","onCreate","onMessage","onClose","onError","state","ws","WebSocket","setWebSocket","close","onopen","readyState","onmessage","onerror","onclose","display","Component","propTypes","string","isRequired","func"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;IAEMA,W;;;AACJ,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA,0HACXA,KADW;;AAAA,QAETC,GAFS,GAESD,KAFT,CAETC,GAFS;AAAA,QAEJC,QAFI,GAESF,KAFT,CAEJE,QAFI,EAEgB;;AAFhB,QAGTC,QAHS,GAGiCH,KAHjC,CAGTG,QAHS;AAAA,QAGCC,SAHD,GAGiCJ,KAHjC,CAGCI,SAHD;AAAA,QAGYC,OAHZ,GAGiCL,KAHjC,CAGYK,OAHZ;AAAA,QAGqBC,OAHrB,GAGiCN,KAHjC,CAGqBM,OAHrB,EAGuC;;AACxD,UAAKC,KAAL,GAAa;AACXC,UAAI,IAAIC,SAAJ,CAAcR,GAAd,EAAmBC,QAAnB,CADO;AAEX;AACAC,wBAHW;AAIXC,0BAJW;AAKXC,sBALW;AAMXC,sBANW;AAOX;AACAL,cARW;AASXC;AATW,KAAb;AAJiB;AAelB;;;;yCACoB;AACnB,WAAKQ,YAAL;AACD;;;2CACsB;AACrB,WAAKH,KAAL,CAAWC,EAAX,CAAcG,KAAd;AACD;;;mCACc;AAAA;;AACb,UAAMH,KAAK,KAAKD,KAAL,CAAWC,EAAtB;AACAA,SAAGI,MAAH,GAAY,YAAM;AAChB,YAAI,OAAKL,KAAL,CAAWJ,QAAX,IAAuBK,GAAGK,UAAH,KAAkB,CAA7C,EAAgD;AAC9C,iBAAKN,KAAL,CAAWJ,QAAX,CAAoBK,EAApB;AACD;AACF,OAJD;AAKAA,SAAGM,SAAH,GAAe,KAAKP,KAAL,CAAWH,SAA1B;AACAI,SAAGO,OAAH,GAAa,KAAKR,KAAL,CAAWD,OAAxB;AACAE,SAAGQ,OAAH,GAAa,KAAKT,KAAL,CAAWF,OAAxB;AACD;;;6BACQ;AACP,aACE;AAAA;AAAA;AACE,iBAAO;AACLY,qBAAS;AADJ;AADT;AAAA;AAAA,OADF;AASD;;;;EA5CuB,gBAAMC,S;;AA+ChCnB,YAAYoB,SAAZ,GAAwB;AACpBlB,OAAK,oBAAUmB,MAAV,CAAiBC,UADF;AAEpBnB,YAAU,oBAAUkB,MAFA;AAGpBhB,aAAW,oBAAUkB,IAAV,CAAeD,UAHN;AAIpBlB,YAAU,oBAAUmB,IAJA;AAKpBjB,WAAS,oBAAUiB,IALC;AAMpBhB,WAAS,oBAAUgB;AANC,CAAxB;;kBASevB,W","file":"WebSocketRC.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass WebSocketRC extends React.Component {\n  constructor(props) {\n    super(props);\n    const { url, protocol } = props; // Config\n    const { onCreate, onMessage, onClose, onError } = props;// Event\n    this.state = {\n      ws: new WebSocket(url, protocol),\n      // Event\n      onCreate,\n      onMessage,\n      onClose,\n      onError,\n      // Config\n      url,\n      protocol,\n    };\n  }\n  componentWillMount() {\n    this.setWebSocket();\n  }\n  componentWillUnmount() {\n    this.state.ws.close();\n  }\n  setWebSocket() {\n    const ws = this.state.ws;\n    ws.onopen = () => {\n      if (this.state.onCreate && ws.readyState === 1) {\n        this.state.onCreate(ws);\n      }\n    };\n    ws.onmessage = this.state.onMessage;\n    ws.onerror = this.state.onError;\n    ws.onclose = this.state.onClose;\n  }\n  render() {\n    return (\n      <div\n        style={{\n          display: 'none',\n        }}\n      >\n        WebSocket React Component by KyuuSeiryuu.\n      </div>\n    );\n  }\n}\n\nWebSocketRC.propTypes = {\n    url: PropTypes.string.isRequired,\n    protocol: PropTypes.string,\n    onMessage: PropTypes.func.isRequired,\n    onCreate: PropTypes.func,\n    onClose: PropTypes.func,\n    onError: PropTypes.func,\n};\n\nexport default WebSocketRC;\n"]}